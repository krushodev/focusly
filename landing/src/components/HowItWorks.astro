---
const steps = [
  {
    number: '01',
    title: 'Choose your mode',
    desc: 'Select from Classic (25min), Deep Focus (50min), or Ultra (90min) based on your task complexity.',
    color: 'violet'
  },
  {
    number: '02',
    title: 'Start focusing',
    desc: 'Hit start and immerse yourself in your work. Optional ambient sounds help you stay in the zone.',
    color: 'cyan'
  },
  {
    number: '03',
    title: 'Take smart breaks',
    desc: 'When the timer ends, take a short break. After 4 sessions, enjoy a longer restorative break.',
    color: 'emerald'
  }
];
---

<section id="how-it-works" class="py-24 px-6 relative overflow-hidden">
  <!-- Background -->
  <div class="absolute inset-0 bg-gradient-to-b from-transparent via-violet-500/5 to-transparent -z-10"></div>
  
  <div class="max-w-7xl mx-auto">
    <!-- Section Header -->
    <div class="text-center mb-20">
      <span class="inline-block px-3 py-1 text-xs font-medium text-cyan-400 bg-cyan-500/10 rounded-full mb-4">How it works</span>
      <h2 class="text-3xl md:text-5xl font-display font-bold text-white mb-4">Simple by design</h2>
      <p class="text-gray-400 text-lg max-w-2xl mx-auto">No complicated setup. No learning curve. Just focus.</p>
    </div>
    
    <!-- Steps -->
    <div class="grid md:grid-cols-3 gap-8 relative">
      <!-- Connecting Line (desktop) -->
      <div class="hidden md:block absolute top-16 left-[16.67%] right-[16.67%] h-px bg-gradient-to-r from-violet-500/50 via-cyan-500/50 to-emerald-500/50"></div>
      
      {
        steps.map((step, index) => (
          <div class="gsap-step relative text-center">
            <!-- Step Number -->
            <div class={`w-32 h-32 mx-auto mb-8 rounded-full bg-${step.color}-500/10 border border-${step.color}-500/20 flex items-center justify-center relative`}>
              <span class={`text-4xl font-display font-bold text-${step.color}-400`}>{step.number}</span>
              <!-- Dot on line -->
              <div class={`hidden md:block absolute -bottom-[1.125rem] left-1/2 -translate-x-1/2 w-3 h-3 rounded-full bg-${step.color}-500 ring-4 ring-[#0E0F12]`}></div>
            </div>
            
            <h3 class="text-xl font-display font-bold text-white mb-3">{step.title}</h3>
            <p class="text-gray-500 leading-relaxed max-w-xs mx-auto">{step.desc}</p>
          </div>
        ))
      }
    </div>
  </div>
</section>

<script>
  import { gsap } from 'gsap';
  import { ScrollTrigger } from 'gsap/ScrollTrigger';

  gsap.registerPlugin(ScrollTrigger);

  gsap.from('.gsap-step', {
    scrollTrigger: {
      trigger: '#how-it-works',
      start: 'top 75%'
    },
    y: 50,
    opacity: 0,
    duration: 0.8,
    stagger: 0.2,
    ease: 'power2.out'
  });
</script>

<style>
  .bg-violet-500\/10 { background-color: rgba(139, 92, 246, 0.1); }
  .bg-cyan-500\/10 { background-color: rgba(6, 182, 212, 0.1); }
  .bg-emerald-500\/10 { background-color: rgba(16, 185, 129, 0.1); }
  .border-violet-500\/20 { border-color: rgba(139, 92, 246, 0.2); }
  .border-cyan-500\/20 { border-color: rgba(6, 182, 212, 0.2); }
  .border-emerald-500\/20 { border-color: rgba(16, 185, 129, 0.2); }
  .text-violet-400 { color: #a78bfa; }
  .text-cyan-400 { color: #22d3ee; }
  .text-emerald-400 { color: #34d399; }
  .bg-violet-500 { background-color: #8b5cf6; }
  .bg-cyan-500 { background-color: #06b6d4; }
  .bg-emerald-500 { background-color: #10b981; }
</style>
